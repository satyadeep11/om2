<div class="colorlib-shop">
    <div class="container">
      <div class="row row-pb-lg">
        <div class="col-md-12 col-md-offset-1">
            <div class="row" >
                <div class="col-xl-12" *ngIf="myData && !myData?.error">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item" > 
                          <a style="color:black" href="Javascript:void(0)" [routerLink]="['/products',catid]">{{catname}}</a>
                        </li>
                        <li class="breadcrumb-item active"> {{myData?.product.ProductName}}</li>
                    </ol>
                </div>
            </div>
          <div class="product-detail-wrap">
            <div class="row">
                <div class="col-md-12 text-center" >
                    <div *ngIf="myData?.error"  >    
                        <img src="../../../assets/images/ordersnone.png"/><br> Nothing Found   
                     </div>
                </div>
              <div class="col-md-5 text-center" >
                <div class="product-entry">                    
                  <div *ngIf="!myData?.error" class="product-img" id="product-img" [ngStyle]="{'cursor': 'pointer'}" (click)="ImageClick($event.target.style.backgroundImage,imagezoom)"></div>
                  <a [ngStyle]="{'cursor': 'pointer'}" (click)="ImageClickNewTab($event.target.previousElementSibling.style.backgroundImage)">Enlarge Image in new tab</a>
                  <!-- <div class="thumb-nail">
                    <a class="thumb-img" id="thumb-img-1" onclick="document.getElementById('product-img').style.backgroundImage =this.style.backgroundImage ;"></a>
                    <a class="thumb-img" id="thumb-img-2" onclick="document.getElementById('product-img').style.backgroundImage =this.style.backgroundImage ;"></a>
                    <a class="thumb-img" id="thumb-img-3" onclick="document.getElementById('product-img').style.backgroundImage =this.style.backgroundImage ;"></a> 
                  </div> -->
                  <!-- <ngb-carousel *ngIf="myData?.variants.length>3">
                    <ng-template ngbSlide *ngFor="let item of myData?.variants; let i= index; let l=count ">
                      <div class="thumb-nail" *ngIf="item.ImageFile">
                        <span *ngIf="myData?.variants[i].ImageFile"><a class="thumb-img" [ngStyle]="{'background-image': 'url(https://www.securedgear.com/sites/998/products/998_' +item.ProductID+'_'+item.ImageFile+ ')'}" onclick="document.getElementById('product-img').style.backgroundImage =this.style.backgroundImage ;"></a></span>
                        <span *ngIf="l>i+1"><a class="thumb-img" [ngStyle]="{'background-image': 'url(https://www.securedgear.com/sites/998/products/998_' +item.ProductID+'_'+myData?.variants[i+1].ImageFile+ ')'}" onclick="document.getElementById('product-img').style.backgroundImage =this.style.backgroundImage ;"></a></span>
                        <span *ngIf="l>i+2"><a class="thumb-img" [ngStyle]="{'background-image': 'url(https://www.securedgear.com/sites/998/products/998_' +item.ProductID+'_'+myData?.variants[i+2].ImageFile+ ')'}" onclick="document.getElementById('product-img').style.backgroundImage =this.style.backgroundImage ;"></a></span>
                      </div>
                    </ng-template>                  
                  </ngb-carousel> -->

                  <!-- <ngb-carousel *ngIf="myData?.variants.length<=3" [showNavigationArrows]="false">
                      <ng-template ngbSlide>
                        <div class="thumb-nail" *ngIf="myData?.variants[0].ImageFile">
                          <span *ngIf="myData?.variants.length<3"><a class="thumb-img" [ngStyle]="{'background-image': 'url(https://www.securedgear.com/sites/998/products/998_' +myData?.variants[0].ProductID+'_'+myData?.variants[0].ImageFile+ ')'}" onclick="document.getElementById('product-img').style.backgroundImage =this.style.backgroundImage ;"></a></span>
                          <span *ngIf="myData?.variants.length==2"><a class="thumb-img" [ngStyle]="{'background-image': 'url(https://www.securedgear.com/sites/998/products/998_' +myData?.variants[0].ProductID+'_'+myData?.variants[1].ImageFile+ ')'}" onclick="document.getElementById('product-img').style.backgroundImage =this.style.backgroundImage ;"></a></span>
                          <span *ngIf="myData?.variants.length==3"><a class="thumb-img" [ngStyle]="{'background-image': 'url(https://www.securedgear.com/sites/998/products/998_' +myData?.variants[0].ProductID+'_'+myData?.variants[2].ImageFile+ ')'}" onclick="document.getElementById('product-img').style.backgroundImage =this.style.backgroundImage ;"></a></span>
                        </div>
                      </ng-template>                  
                    </ngb-carousel> -->
                    <!-- <span class="thumb-nail">
                    <a *ngFor="let item of myData?.variants; " class="thumb-img" style="height:50px; width:50px" [ngStyle]="{'background-image': 'url(https://www.securedgear.com/sites/998/products/998_' +item.ProductID+'_'+item.ImageFile+ ')'}" onclick="document.getElementById('product-img').style.backgroundImage =this.style.backgroundImage ;">
                      <span  class="tooltiptext">{{item.A2_Label||"None"}}</span>
                      <span>{{ l === true ? updateCart() : null}}</span>
                    </a>
                    </span> -->


                </div>
              </div>
              <div class="col-md-7" *ngIf="myData && !myData?.error">                
                  <h3 class="detail-one" *ngIf="myData && !myData?.error">{{myData?.product.ProductName}}</h3>
                  <p class="price" *ngIf="myData && !myData?.error">
                    <span class="detail-two">{{myData?.product.Price | currency:'USD'}} <b><a [ngStyle]="{'cursor': 'pointer'}" data-toggle="tooltip" placement="right" ngbTooltip="Prices listed are MSRP pricing and are used for ballpark purposes. A final price for all items will be provided for you factoring in your specific decoration and expected volume"><i class="fa fa-question-circle"></i></a></b></span> 
                    <!-- <span class="rate text-right">
                      <i class="fa fa-star"></i>
                      <i class="fa fa-star"></i>
                      <i class="fa fa-star"></i>
                      <i class="fa fa-star"></i>
                      <i class="fa fa-star-half"></i>
                      (74 Rating)
                    </span> -->
                  </p>
                  <p>{{myData?.product.ProductDesc1}}</p>                  
                      <div *ngIf="myData && !myData?.error" id="color-thumbnails" class="product-entry detail-three box-case" style="display: inline-block;">
                        <span style="background: #ee582b ; color:white;border: 2px solid #ee582b" *ngIf="!this.colorselected || this.colorselected=='undefined'">* Click on color(s) below to add this product to your Selections.<br></span>
                        <!-- <div *ngIf="myData?.variants.length!=cart.length">  -->
                          <!-- <h5>Colors Available</h5> -->
                          <div>
                        <span class="thumb-nail">
                            <span *ngFor="let item of myData?.variants;let l = last" >
                            <a class="thumb-img" [class.circle]="this.colorselected?.includes(item.Attr2) && item.Attr2!=null"  [id]="'color'+item.Attr2" style="padding: 2px;display: inline-table;float:none;margin:2px" on-mouseover="updateImage(item.ProductID,getMain(item.ImageFile),'product-img');" (click)="updateImage(item.ProductID,getMain(item.ImageFile),'product-img');checkcolorCart(item.A2_Label,item.Attr2,item.ImageFile);">
                                <img style="height:50px; width:50px" [src]="'https://www.securedgear.com/sites/998/products/998_' +item.ProductID+'_'+getThumb(item.ImageFile)"/>
                                  <span  class="tooltiptext">{{item.A2_Label||"None"}}</span>                              
                            </a>
                          </span>
                        </span>
                      </div> 
                      <!-- <div> 
                        
                        <span *ngIf="cart.length!=0" class="thumb-nail">
                            <br ><h5>Colors Selected</h5>
                            <span *ngFor="let item of cart;let l = last">
                            <a *ngIf="this.colorselected?.includes(item.Attr2) && item.Attr2!=null" class="thumb-img" style="height:50px; width:50px" [ngStyle]="{'background-image': 'url(https://www.securedgear.com/sites/998/products/998_' +item.ProductID+'_'+getThumb(item.ImageFile)+ ')'}"  on-mouseover="updateImage(item.ProductID,getMain(item.ImageFile),'product-img');" (click)="updateImage(item.ProductID,getMain(item.ImageFile),'product-img');deletefromCart(item.A2_Label,item.Attr2,item.ImageFile)">
                              <span  class="tooltiptext">{{item.A2_Label||"None"}}</span>                            
                            </a>
                          </span>
                        </span>   
                      </div>                         -->
                      </div>
                     <span style="display: inline-flex;"><p *ngIf="myData && !myData?.error"><button (click)="BacktoCategory('back',content);" class="btn btn-primary detail-six">Back to Category</button></p>
                     <p *ngIf="myData && !myData?.error"><button (click)="BacktoCategory('add',content);" class="btn btn-primary detail-six">Add to Selection</button></p></span>
                      <div *ngIf="myData && !myData?.error">
                      <div *ngIf="myData?.companion.length>0" id="color-thumbnails" class="product-entry detail-four box-case" style="display: flow-root;">
                          <div *ngIf="myData?.companion.length>0" class="col-md-12 col-md-offset-3 text-center">
                              <h5 style="display:initial"><span>Companion Products</span></h5>
                              <!-- <p>Following are companion products for above selection.</p> -->
                          </div>
                          <div class="row row-pb-lg " *ngIf="myData?.companion.length>0" style="padding-bottom: unset!important;">
                              <div *ngFor=" let item of myData?.companion" class="col-md-4 text-center">
                                  <div class="product-entry-companion">
                                      <div class="product-img-companion" [routerLink]="['/product-detail',item.product.ProductID]" [routerLinkActive]="['router-link-active']" [ngStyle]="{'cursor': 'pointer'}" [style.backgroundImage]="this.url+item.product.ProductID+'_'+getThumb200(item.product.ImageFile)+this.url_close">
                                          <p *ngIf="visitedproducts.includes(item.product.ProductID.toString())" class="tag"><span class="new">Viewed</span></p>
                                          <!-- &#9989; -->
                                          <div class="cart-companion">
                                              <p>
                                                  <span><a [routerLink]="['/product-detail',item.product.ProductID]" [routerLinkActive]="['router-link-active']"><i class="fa fa-eye">View Product</i></a></span> 
                                              </p>
                                          </div>
                                      </div>
                                      <div class="desc-companion">
                                          <h5><a [routerLink]="['/product-detail',item.product.ProductID]" [routerLinkActive]="['router-link-active']">{{item.product.ProductName}}</a></h5>                                          
                                      </div>
                                  </div>
                              </div>                         
                          </div>
                      </div> 
                    </div> 
                                  
                  
                  <p *ngIf="myData && !myData?.error">SKU: {{myData?.product.ProductBaseSKU}}</p> 
                  <div *ngIf="myData && !myData?.error">
                  <div *ngIf="myData?.sizes[0].A1_Short" class="size-wrap detail-five">
                      <p class="size-desc">
                        Sizes:<br> 
                        <a *ngFor=" let item of myData?.sizes;" class="size">{{item.A1_Short||"None"}} <span class="tooltiptext">{{item.A1_Label||"None"}}</span></a>                 
                      </p>
                      <p *ngIf="myData?.sizes[0].A1_Short" style="font-size: 13px;color: #b3b3b3;">
                          All the above sizes will be made available in your store.
                        </p>
                    </div>
                    </div>
                  <!-- <p><span [routerLink]="['/cart']" [routerLinkActive]="['router-link-active']" class="btn btn-primary btn-addtocart"><i class="fa fa-shopping-cart"></i> Add to Cart</span></p> -->
                  
                
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- <div *ngIf="myData?.companion.length>0" class="col-md-12 col-md-offset-3 text-center colorlib-heading">
          <h2><span>Companion Products</span></h2>
          <p>Following are companion products for above selection.</p>
      </div>
      <div class="row row-pb-lg detail-six" *ngIf="myData?.companion.length>0">
        <div *ngFor=" let item of myData?.companion" class="col-md-4 text-center">
            <div class="product-entry">
                <div class="product-img" [routerLink]="['/product-detail',item.product.ProductID]" [routerLinkActive]="['router-link-active']" [ngStyle]="{'cursor': 'pointer'}" [style.backgroundImage]="this.url+item.product.ProductID+'_'+getMain(item.product.ImageFile)+this.url_close">
                    <p *ngIf="visitedproducts.includes(item.product.ProductID.toString())" class="tag"><span class="new">Viewed</span></p>
                    
                    <div class="cart">
                        <p>
                            <span><a [routerLink]="['/product-detail',item.product.ProductID]" [routerLinkActive]="['router-link-active']"><i class="fa fa-eye">    View Product</i></a></span> 
                        </p>
                    </div>
                </div>
                <div class="desc">
                    <h3><a [routerLink]="['/product-detail',item.product.ProductID]" [routerLinkActive]="['router-link-active']">{{item.product.ProductName}}</a></h3>
                    <p class="price"><span>{{item.product.Price|currency:'USD'}}</span></p>
                </div>
            </div>
        </div>                         
    </div> -->
      <div *ngIf="myData && !myData?.error" class="row">
        <div class="col-sm-12 col-md-offset-1">
          <div class="row">
            <div class="col-sm-12 tabulation">
                <div class="card detail-seven">                    
                    <div class="card-body">
                <ngb-tabset type="pills">
                    <ngb-tab title="Additional Info">
                        <ng-template ngbTabContent >
                            <br>
                            <p>{{myData?.product.ProductDesc1}}</p>
                            <br>
                            <p>{{myData?.product.ProductDesc2}}</p>
                        </ng-template>
                    </ngb-tab>
                    
                    <ngb-tab title="Sizing Chart" *ngIf="myData?.chart.columns.length>0" >
                        <ng-template ngbTabContent >
                            <div class="table-responsive">
                            <table class="table table-striped ">
                                <caption>All sizes represented in this size chart are approximations and are not actual finished sizes.</caption>
                              <thead>
                                <tr>
                                  <th></th>
                                  <th scope="col" *ngFor="let column of myData?.chart.columns">{{column.ColumnText}}</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr  *ngFor="let row of myData?.chart.rows; let i =index">
                                  <th scope="row">{{row.RowText}} <i *ngIf="row.RowMeasure.length>0" class="fa fa-question-circle" [ngStyle]="{'cursor': 'pointer'}" data-toggle="tooltip" placement="right" [ngbTooltip]="row.RowMeasure"></i></th>
                                  <td *ngFor="let row of myData?.chart.data|slice:(i*myData?.chart.columns.length):((i+1)*myData?.chart.columns.length)">{{row.DataText}}</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </ng-template>
                    </ngb-tab>
                </ngb-tabset>    
                </div>
              </div>          
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="myData" class="colorlib-shop">
    <div class="container">
      <div class="row">
        <div class="col-md-12 col-md-offset-3 text-center colorlib-heading">
          <h2><span>Similar Products</span></h2>
          <p>Following are some products we recommend based on your selections.</p>
        </div>
      </div>
      <div class="row detail-eight">
        <div *ngFor=" let item of myData?.related|slice:0:4" class="col-md-3 text-center ">
          <div class="product-entry">
            <div class="product-img" [routerLink]="['/product-detail',item.ProductID]" [routerLinkActive]="['router-link-active']" [ngStyle]="{'cursor': 'pointer'}" [style.backgroundImage]="this.url+item.ProductID+'_'+getMain(item.ImageFile)+this.url_close">
                <!-- &#9989; -->
                <div class="cart">
                  <p>                                            
                    <span><a [routerLink]="['/product-detail',item.ProductID]" [routerLinkActive]="['router-link-active']"><i class="fa fa-eye">    View Product</i></a></span> 
                  </p>
                </div>
            </div>
            <div class="desc">
                <h3><a [routerLink]="['/product-detail',item.ProductID]" [routerLinkActive]="['router-link-active']">{{item.ProductName}}</a></h3>
                <p class="price"><span>{{item.Price|currency:'USD'}}</span></p>
            </div>
        </div>
        </div>
      </div>
    </div>
  </div>


  <ng-template #content let-modal>
      <div class="modal-header">
        <h4 class="modal-title">{{myData?.product.ProductName}} was added to your Selection</h4>
        <button type="button" class="close" aria-label="Close" (click)="closeModal()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>You have selected the following Colors</p>
        <ul>
          <li *ngFor="let color of cart;">{{color.A2_Label}}</li>
        </ul>
      </div>
      <div class="modal-footer">
          <button type="button" ngbAutofocus class="btn btn-outline-secondary" [routerLink]="['/cart']" [routerLinkActive]="['router-link-active']" (click)="closeModal()" >Cart</button>
          <button type="button" class="btn btn-primary" [routerLink]="['/products',catid]" [routerLinkActive]="['router-link-active']" (click)="closeModal()">Add More Products</button>  
        </div>
</ng-template>

<ng-template #imagezoom let-modal>
  <div class="modal-header">
    <h4 class="modal-title">{{myData?.product.ProductName}}</h4>
    <button type="button" class="close" aria-label="Close" (click)="closeModal()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <img [(src)]="this.imageurl" style="display:block; margin-left: auto;margin-right: auto">
  </div>
  <div class="modal-footer">      
    </div>
</ng-template>

  